{"version":3,"sources":["ng://@vapaee/scatter/lib/token.class.ts","ng://@vapaee/scatter/lib/asset.class.ts","ng://@vapaee/scatter/lib/contract.class.ts","ng://@vapaee/scatter/lib/utils.class.ts","null","ng://@vapaee/scatter/lib/scatter.service.ts","ng://@vapaee/scatter/lib/scatter.module.ts"],"names":["Token","obj","this","_symbol","_precision","_contract","console","assert","symbol","length","precision","contract","toString","Object","defineProperty","prototype","_str","str","Asset","a","b","amount","BigNumber","token","parse","plus","minus","clone","text","sym","split","amount_str","isNaN","parseInt","error","valueToString","decimals","total","parts","toFixed","integer","decimal","i","substr","toNumber","parseFloat","toUpperCase","inverse","dividedBy","SmartContract","scatter","excecute","action","params","_this","log","Promise","resolve","reject","getContractWrapper","then","authorization","response","catch","err","getTable","table","_p","assign","scope","table_key","lower_bound","upper_bound","limit","key_type","index_position","getTableRows","ScatterUtils","ch","idx","charmap","indexOf","TypeError","code_0","charCodeAt","code_1","code_4","code_9","code_a","code_f","code_z","decodeNibble","nib","nibble","value","encodeNibble","index","bits","decodeUint64","_num","num","concat","encodeUnit64","slugid","top","low","extractLength","insertLength","valueToChar","v","String","fromCharCode","charToValue","c","extractChar","pot","Math","pow","encode","insertChar","j","decodeSlug","sluig","encodeSlug","name","push","slug","slugTo128bits","topbits","lowbits","mixbits","oldEosjsEncodeName","littleEndian","bitstr","charidx","bitlen","Number","repeat","Long.fromString","leHex","bytes","toBytesLE","toBytesBE","bytes_1","__values","o","m","Symbol","iterator","call","next","done","tslib_1.__values","bytes_1_1","n","encodeName","number","VapaeeScatter","Subject","setReady","setLogged","setConnected","setEosjs","setEndpointsReady","feed","Feedback","_networks_slugs","_networks","_network","explorer","chainId","endpoints","protocol","host","port","_account_queries","scatterutils","_account","lib","identity","accounts","find","x","blockchain","data","total_balance","total_balance_asset","cpu_limit","net_limit","ram_limit","refund_request","total_resources","resetIdentity","forgotten","forgetIdentity","onLogggedStateChange","setIdentity","account","queryAccountData","_","default","setEndpoints","setNetwork","waitEndpoints","getNetwork","initScatter","onNetworkChange","network","endpoint","eosconf","networks","resetPromises","waitEosjs","r","p","waitConnected","waitReady","waitLogged","ScatterJS","plugins","ScatterEOS","eos","Eos","expireInSeconds","retryConnectingApp","clearInterval","reconnectTimer","setInterval","_connected","connectApp","reconnectTime","random","appTitle","setLoading","connectionOptions","initTimeout","connect","connected","setError","logged","login","e","calculateTotalBalance","core_liquid_balance_asset","net_amount_asset","cpu_amount_asset","self_delegated_bandwidth","cpu_weight_asset","net_weight_asset","calculateResourceLimit","max","used","percent","min","percentStr","round","getAccount","account_name","account_data","core_liquid_balance","net_amount","cpu_amount","request_time","total_asset","net_weight","cpu_weight","ram_quota","ram_usage","promise","setTimeout","getSmartContract","loginTimer","getIdentity","clearTimeout","logout","authority","tkey","lowerb","upperb","ktype","ipos","_data","Injectable","args","providedIn","VapaeeScatterModule","NgModule","imports","declarations","providers","exports"],"mappings":"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","sourcesContent":["\n\nexport class Token {\n    private _str?: string;\n    private _symbol: string;\n    private _precision?: number;\n    private _contract?: string;\n\n    constructor(obj:any = null) {\n        this._symbol = \"AUX\";\n        this._precision = null;\n        this._contract = null;\n    \n        if (typeof obj == \"string\") {\n            this._symbol = obj;\n            console.assert(this.symbol.length > 0, \"ERROR: symbol not valid for token: \", this._symbol);\n            console.assert(this.symbol.length < 9, \"ERROR: symbol not valid for token: \", this._symbol);\n        }\n        \n        if (obj) {\n            if (obj instanceof Token) {\n                this._symbol = obj._symbol;\n                this._precision = obj._precision;\n                this._contract = obj._contract;\n            } else if (typeof obj == \"object\") {\n                this._symbol = obj.symbol || this._symbol;\n                this._precision = obj.precision || this._precision;\n                this._contract = obj.contract || this._contract;\n            }\n        }\n\n        this.toString();\n    }\n\n    get symbol() { return this._symbol; }\n    get precision() { return this._precision; }\n    get contract() { return this._contract; }\n\n    get str() {\n        if (this._str) return this._str;\n        this._str = this.symbol;\n        if (this._precision != null || this._contract != null) {\n            if (this._precision && this._contract) {\n                this._str += \" (\" + this._precision + \", \" + this._contract + \")\";\n            } else {\n                if (this._precision) {\n                    this._str += \" (\" + this._precision + \")\";\n                }\n                if (this._contract) {\n                    this._str += \" (\" + this._contract + \")\";\n                }  \n            }\n        }\n        return this._str;\n    }\n\n    toString() {\n        return this.str;\n    }\n\n}","import BigNumber from \"bignumber.js\";\nimport { Token } from \"./token.class\";\n\nexport class Asset {\n    amount:BigNumber;\n    token:Token;\n    \n    constructor(a: any = null, b: any = null) {\n        if (a == null && b == null) {\n            this.amount = new BigNumber(0);\n            this.token = new Token();\n            return;\n        }\n\n        if (a instanceof BigNumber) {\n            this.amount = a;\n            this.token = b;\n            return;\n        }\n\n        if (a instanceof Asset) {\n            this.amount = a.amount;\n            this.token = b;\n            return;\n        }\n\n        if (typeof a == \"number\") {\n            this.amount = new BigNumber(a);\n            this.token = b;\n            return;\n        }\n\n        if (typeof a == \"string\") {\n            this.parse(a);\n            console.assert(this.amount instanceof BigNumber, \"ERROR: Asset string malformed: '\"+a+\"'\");\n            return;\n        }\n    }\n\n    plus(b:Asset) {\n        console.assert(!!b, \"ERROR: b is not an Asset\", b, this.str);\n        console.assert(b.token.symbol == this.token.symbol, \"ERROR: trying to sum assets with different tokens: \" + this.str + \" and \" + b.str);\n        var amount = this.amount.plus(b.amount);\n        return new Asset(amount, this.token);\n    }\n\n    minus(b:Asset) {\n        console.assert(!!b, \"ERROR: b is not an Asset\", b, this.str);\n        console.assert(b.token.symbol == this.token.symbol, \"ERROR: trying to substract assets with different tokens: \" + this.str + \" and \" + b.str);\n        var amount = this.amount.minus(b.amount);\n        return new Asset(amount, this.token);\n    }\n\n    clone(): Asset {\n        return new Asset(this.amount, this.token);\n    }\n\n    parse(text: string) {\n        if (text == \"\") return;\n        var sym = text.split(\" \")[1];\n        var amount_str = text.split(\" \")[0];\n        this.amount = new BigNumber(amount_str);\n\n        var precision = 0;\n        if (amount_str.split(\".\").length == 2) {\n            precision = amount_str.split(\".\")[1].length;\n        } else if (amount_str.split(\".\").length == 1) {\n            if (isNaN(parseInt(amount_str))) {\n                console.error(\"ERROR: Asset malformed string: '\"+text+\"'\");\n            }\n        }\n        \n        this.token = new Token({\n            symbol: sym,\n            precision: precision\n        }); \n    }\n\n    valueToString(decimals:number = -1, total:boolean = false): string {\n        if (!this.token) return \"0\";\n        var parts = this.amount.toFixed().split(\".\");\n        var integer = parts[0];\n        var precision = this.token.precision;\n        var decimal = (parts.length==2 ? parts[1] : \"\");\n        if (decimals != -1) {\n            precision = decimals;\n        }\n        if (total) {\n            precision -= parts[0].length-1;\n            precision = precision > 0 ? precision : 0;\n        }\n        for (var i=decimal.length; i<precision; i++) {\n            decimal += \"0\";\n        }\n        if (decimal.length > precision) {\n            decimal = decimal.substr(0, precision);\n        }    \n\n        if (precision == 0) {\n            return integer;\n        } else {\n            return integer + \".\" + decimal;\n        }\n    }\n\n    toNumber() {\n        if (!this.token) return 0;\n        return parseFloat(this.valueToString(8));\n    }\n\n    get str () {\n        return this.toString();\n    }\n\n    toString(decimals:number = -1): string {\n        if (!this.token) return \"0.0000\";\n        return this.valueToString(decimals) + \" \" + this.token.symbol.toUpperCase();\n    }\n\n    inverse(token: Token): Asset {\n        var result = new BigNumber(1).dividedBy(this.amount);\n        var asset =  new Asset(result, token);\n        return asset;\n    }\n}","import { VapaeeScatter } from \"./scatter.service\";\n\n// ------------------\nexport interface TableParams {\n    contract?:string, \n    scope?:string, \n    table_key?:string, \n    lower_bound?:string, \n    upper_bound?:string, \n    limit?:number, \n    key_type?:string, \n    index_position?:string\n}\n\nexport interface TableResult {\n    more: boolean;\n    rows: any[];\n}\n\nexport class SmartContract {\n    contract: string;\n    scatter: VapaeeScatter;\n    \n    constructor(contract: string = \"\", scatter: VapaeeScatter = null) {\n        this.contract = contract;\n        this.scatter = scatter;\n    }    \n    /*\n    // eosjs2\n    excecute(action: string, params: any) {\n        console.log(\"Utils.excecute()\", action, [params]);\n        return new Promise<any>((resolve, reject) => {\n            try {\n                this.scatter.executeTransaction(this.contract, action, params).then(result => {\n                    resolve(result);\n                }).catch(err => {\n                    console.error(\"ERROR: \", err);\n                    reject(err);\n                });\n            } catch (err) { console.error(err); reject(err); }\n        }); // .catch(err => console.error(err) );\n    }\n    /*/\n    excecute(action: string, params: any) {\n        console.log(\"Utils.excecute()\", action, [params]);\n        return new Promise<any>((resolve, reject) => {\n            try {\n                this.scatter.getContractWrapper(this.contract).then(contract => {\n                    try {\n                        contract[action](params, this.scatter.authorization).then((response => {\n                            console.log(\"Utils.excecute() ---> \", [response]);\n                            resolve(response);\n                        })).catch(err => { reject(err); });\n                    } catch (err) { reject(err); }\n                }).catch(err => { reject(err); });\n            } catch (err) { reject(err); }\n        }); // .catch(err => console.error(err) );\n    }\n    //*/\n\n    getTable(table:string, params:TableParams = {}): Promise<TableResult> {\n\n        var _p = Object.assign({\n            contract: this.contract, \n            scope: this.contract, \n            table_key: \"0\", \n            lower_bound: \"0\", \n            upper_bound: \"-1\", \n            limit: 25, \n            key_type: \"i64\", \n            index_position: \"1\"\n        }, params);\n\n        return this.scatter.getTableRows(\n            _p.contract,\n            _p.scope, table,\n            _p.table_key,\n            _p.lower_bound,\n            _p.upper_bound,\n            _p.limit,\n            _p.key_type,\n            _p.index_position\n        );\n    }    \n    \n}","import BigNumber from \"bignumber.js\";\nimport * as Long from 'long';\n\n\n// ------------------\nexport interface SlugId {\n    low?: string;\n    str?: string;\n    top?: string;\n}\nexport interface Work {\n    items: any[];\n    containers: any[];\n}\nexport interface Profile {\n    id?:string;\n    slugid: SlugId;\n    account: string;\n    containers?: any[],\n    work?: Work;\n}\n\nexport class ScatterUtils {\n    code_0:number;\n    code_1:number;\n    code_4:number;\n    code_9:number;\n    code_a:number;\n    code_f:number;\n    code_z:number;\n    \n    constructor() {\n        this.code_0 = \"0\".charCodeAt(0);\n        this.code_1 = \"1\".charCodeAt(0);\n        this.code_4 = \"4\".charCodeAt(0);\n        this.code_9 = \"9\".charCodeAt(0);\n        this.code_a = \"a\".charCodeAt(0);\n        this.code_f = \"f\".charCodeAt(0);        \n        this.code_z = \"z\".charCodeAt(0);        \n    }    \n\n    // this part is still experimental (init) -----------------\n    decodeNibble(nib:number) {\n        var nibble = [0,0,0,0];\n        var value = 0;\n        if (this.code_0 <= nib && nib <= this.code_9) {\n            value = nib - this.code_0;\n        } else if (this.code_a <= nib && nib <= this.code_f) {\n            value = nib - this.code_a + 10;\n        }\n        nibble[0] = (value & 8) > 0 ? 1 : 0;\n        nibble[1] = (value & 4) > 0 ? 1 : 0;\n        nibble[2] = (value & 2) > 0 ? 1 : 0;\n        nibble[3] = (value & 1) > 0 ? 1 : 0;\n        return nibble;\n    }\n\n    encodeNibble(index:number, bits:number[]) {\n        var value = 0;\n        value += bits[index + 0] == 1 ? 8 : 0;\n        value += bits[index + 1] == 1 ? 4 : 0;\n        value += bits[index + 2] == 1 ? 2 : 0;\n        value += bits[index + 3] == 1 ? 1 : 0;\n        if (0 <= value && value <= 9) {\n            return \"\" + value;\n        }\n        switch(value) {\n            case 10: return \"a\";\n            case 11: return \"b\";\n            case 12: return \"c\";\n            case 13: return \"d\";\n            case 14: return \"e\";\n            case 15: return \"f\";\n        }\n        return \"?\";\n    }\n\n    // _num is an hexa\n    decodeUint64(_num: string) {\n        var bits:number[] = [];\n        var num:string = _num.substr(2);\n        for (var i=0; i<num.length; i++) {\n            bits = bits.concat(this.decodeNibble(num.charCodeAt(i)));\n        }\n        return bits;\n    }\n\n    encodeUnit64(bits:number[]) {\n        var slugid:SlugId = {top:\"0x\",low:\"0x\"};\n        var str = \"top\";\n        for (var i=0; i<bits.length; i+=4) {\n            if (i>=128) str = \"low\";\n            slugid[str] += this.encodeNibble(i, bits);\n        }\n        return slugid;\n    }\n\n    extractLength(bits:number[]) {\n        if(bits.length != 256) console.error(\"ERROR: extractLength(bits) bits must be an array of 256 bits\");\n        return bits[250] * 32 + bits[251] * 16 + bits[252] * 8 + bits[253] * 4 + bits[254] * 2 + bits[255] * 1;\n    }\n\n    insertLength(bits:number[], length: number) {\n        if(bits.length != 256) console.error(\"ERROR: extractLength(bits) bits must be an array of 256 bits\");\n        bits[250] = (length & 32) ? 1 : 0;\n        bits[251] = (length & 16) ? 1 : 0;\n        bits[252] = (length &  8) ? 1 : 0;\n        bits[253] = (length &  4) ? 1 : 0;\n        bits[254] = (length &  2) ? 1 : 0;\n        bits[255] = (length &  1) ? 1 : 0;\n    }\n\n    valueToChar(v:number) {\n        if (v == 0) return '.';\n        if (v == 1) return '-';\n        if (v < 6) return String.fromCharCode(v + this.code_0 - 1);\n        if (v < 32) return String.fromCharCode(v + this.code_a - 6);\n        console.assert(false, \"ERROR: value out of range [0-31]\", v);\n        return '?';                   \n    }\n\n    charToValue(c:string) {\n        console.assert(c.length == 1, \"ERROR: c MUST be a character (string with length == 1). Got\", typeof c, c);\n        if (c == \".\") return 0;\n        if (c == \"-\") return 1;\n        if (this.code_0 < c.charCodeAt(0) && c.charCodeAt(0) <= this.code_4) return c.charCodeAt(0) - this.code_1 + 2;\n        if (this.code_a <= c.charCodeAt(0) && c.charCodeAt(0) <= this.code_z) return c.charCodeAt(0) - this.code_a + 6;\n        console.assert(false, \"ERROR: character '\" + c + \"' is not in allowed character set for slugid \");\n        return -1;\n    }\n\n    extractChar(c:number, bits:number[]) {\n        var encode = 5;\n        var pot = Math.pow(2, encode-1); // 16\n        var value = 0;\n        var index = c * encode;\n        for (var i=0; i<encode; i++, pot = pot/2) {\n            value += bits[index + i] * pot;\n        }\n        var char = this.valueToChar(value);\n        return char;\n    }\n\n    insertChar(value:number, j:number, bits:number[]) {\n        var encode = 5;\n        var index = j * encode;\n        bits[index + 0] = (value & 16) > 0 ? 1 : 0;\n        bits[index + 1] = (value &  8) > 0 ? 1 : 0;\n        bits[index + 2] = (value &  4) > 0 ? 1 : 0;\n        bits[index + 3] = (value &  2) > 0 ? 1 : 0;            \n        bits[index + 4] = (value &  1) > 0 ? 1 : 0;\n    }\n\n    decodeSlug(sluig:SlugId) {\n        // decodeSlug() 0x41ae9c04d34873482a78000000000000 0x00000000000000000000000000000010\n        // console.log(\"decodeSlug()\", nick.top, nick.low);\n        var bits:number[] = [];\n        bits = this.decodeUint64(sluig.top).concat(this.decodeUint64(sluig.low));\n        var length = bits[250] * 32 + bits[251] * 16 + bits[252] * 8 + bits[253] * 4 + bits[254] * 2 + bits[255] * 1;\n        // console.log(\"length: \", length);\n        var str:string = \"\";\n        for (var i=0; i<length; i++) {\n            str += this.extractChar(i, bits);\n        }\n        // console.log(\"str: \", str);\n        sluig.str = str;\n        return sluig;\n    }\n\n    encodeSlug(name:string):SlugId {\n        var bits = [];\n        for (var i=0; i<256; i++) {\n            bits.push(0);\n        }\n        for (var i=0; i<name.length; i++) {\n            var value = this.charToValue(name[i]);\n            this.insertChar(value, i, bits);\n        }\n        this.insertLength(bits, name.length);\n        var slug = this.encodeUnit64(bits);\n\n        slug = this.decodeSlug(slug);\n        console.assert(slug.str == name, \"ERROR: slug.str: \", slug.str, [slug.str], [name]);\n\n        return slug;\n    }\n\n    slugTo128bits(slug:SlugId):string {\n        var str = \"0x\";\n        var topbits = this.decodeUint64(slug.top);\n        var lowbits = this.decodeUint64(slug.low);\n        var mixbits = [];\n        for (var i=0; i<topbits.length; i++) {\n            mixbits.push(topbits[i] ^ lowbits[i] ? 1 : 0);\n        }\n        for (var i=0; i<mixbits.length; i+=4) {\n            str += this.encodeNibble(i, mixbits);\n        }        \n        return str;\n    }\n    // (end) ---------------------------------------------------\n\n    // OLD eosjs encodeName solution ------------------------------------------------------\n    charmap = '.12345abcdefghijklmnopqrstuvwxyz';\n    charidx = ch => {\n        const idx = this.charmap.indexOf(ch)\n        if(idx === -1)\n          throw new TypeError(`Invalid character: '${ch}'`)\n      \n        return idx;\n    }\n    oldEosjsEncodeName(name, littleEndian = false) {\n        if(typeof name !== 'string')\n          throw new TypeError('name parameter is a required string')\n      \n        if(name.length > 12)\n          throw new TypeError('A name can be up to 12 characters long')\n      \n        let bitstr = ''\n        for(let i = 0; i <= 12; i++) { // process all 64 bits (even if name is short)\n          const c = i < name.length ? this.charidx(name[i]) : 0\n          const bitlen = i < 12 ? 5 : 4\n          let bits = Number(c).toString(2)\n          if(bits.length > bitlen) {\n            throw new TypeError('Invalid name ' + name)\n          }\n          bits = '0'.repeat(bitlen - bits.length) + bits\n          bitstr += bits\n        }\n      \n        const value = Long.fromString(bitstr, true, 2)\n      \n        // convert to LITTLE_ENDIAN\n        let leHex = ''\n        const bytes = littleEndian ? value.toBytesLE() : value.toBytesBE()\n        for(const b of bytes) {\n          const n = Number(b).toString(16)\n          leHex += (n.length === 1 ? '0' : '') + n\n        }\n      \n        const ulName = Long.fromString(leHex, true, 16).toString()\n      \n        // console.log('encodeName', name, value.toString(), ulName.toString(), JSON.stringify(bitstr.split(/(.....)/).slice(1)))\n        \n        return ulName.toString()\n    }\n    // -------------------------------------------------------\n\n    encodeName(name:string):BigNumber {\n        /*\n        const buffer: Serialize.SerialBuffer = new Serialize.SerialBuffer();\n        buffer.pushName(name);\n        var number = buffer.getUint64AsNumber();\n        */\n        var number = this.oldEosjsEncodeName(name);\n        return new BigNumber(number);\n    }\n\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n// import { EosioTokenMathService } from './eosio.token-math.service';\nimport { Feedback } from '@vapaee/feedback';\n\n// scatter libraries\n/*/\n// eosjs2\nimport ScatterJS from '@scatterjs/core';\nimport ScatterEOS from '@scatterjs/eosjs2';\nimport ScatterLynx from '@scatterjs/lynx';\nimport {JsonRpc, Api} from 'eosjs';\n/*/\nimport ScatterJS from 'scatterjs-core';\nimport ScatterEOS from 'scatterjs-plugin-eosjs'\nimport Eos from 'eosjs';\nimport { Asset } from './asset.class';\nimport { SmartContract } from './contract.class';\nimport { ScatterUtils } from './utils.class';\n//*/\n\n// declare var ScatterJS:any;\n\n// eosjs / eosjs2\nexport interface RPC {\n    endpoint: string;\n    fetchBuiltin: Function;\n    fetch: Function;\n    get_abi: Function;\n    get_account: Function;\n    get_block_header_state: Function;\n    get_block: Function;\n    get_code: Function;\n    get_currency_balance: Function;\n    get_currency_stats: Function;\n    get_info: Function;\n    get_producer_schedule: Function;\n    get_producers: Function;\n    get_raw_code_and_abi: Function;\n    getRawAbi: Function;\n    get_table_rows: Function;\n    getRequiredKeys: Function;\n    push_transaction: Function;\n    db_size_get: Function;\n    history_get_actions: Function;\n    history_get_transaction: Function;\n    history_get_key_accounts: Function;\n    history_get_controlled_accounts: Function;    \n}\n\n/*\n// eosjs2\nexport interface EOS {\n    contracts: Function;\n    cachedAbis: Function;\n    rpc: Function;\n    authorityProvider: Function;\n    abiProvider: Function;\n    signatureProvider: Function;\n    chainId: Function;\n    textEncoder: Function;\n    textDecoder: Function;\n    abiTypes: Function;\n    transactionTypes: Function;\n    rawAbiToJson: Function;\n    getCachedAbi: Function;\n    getAbi: Function;\n    getTransactionAbis: Function;\n    getContract: Function;\n    serialize: Function;\n    deserialize: Function;\n    serializeTransaction: Function;\n    deserializeTransaction: Function;\n    serializeActions: Function;\n    deserializeActions: Function;\n    deserializeTransactionWithActions: Function;\n    transact: Function;\n    pushSignedTransaction: Function;\n    hasRequiredTaposFields: Function;    \n}\n/*/\n// eosjs\nexport interface EOS {\n    getInfo:Function,\n    getAccount:Function,\n    getCode:Function,\n    getCodeHash:Function,\n    getAbi:Function,\n    getRawCodeAndAbi:Function,\n    abiJsonToBin:Function,\n    abiBinToJson:Function,\n    getRequiredKeys:Function,\n    getBlock:Function,\n    getBlockHeaderState:Function,\n    getTableRows:Function,\n    getCurrencyBalance:Function,\n    getCurrencyStats:Function,\n    getProducers:Function,\n    getProducerSchedule:Function,\n    getScheduledTransactions:Function,\n    pushBlock:Function,\n    pushTransaction:Function,\n    pushTransactions:Function,\n    getActions:Function,\n    getTransaction:Function,\n    getKeyAccounts:Function,\n    getControlledAccounts:Function,\n    createTransaction:Function,\n    transaction:Function,\n    nonce:Function,\n    transfer:Function,\n    create:Function,\n    issue:Function,\n    bidname:Function,\n    newaccount:Function,\n    setcode:Function,\n    setabi:Function,\n    updateauth:Function,\n    deleteauth:Function,\n    linkauth:Function,\n    unlinkauth:Function,\n    canceldelay:Function,\n    onerror:Function,\n    buyrambytes:Function,\n    sellram:Function,\n    buyram:Function,\n    delegatebw:Function,\n    undelegatebw:Function,\n    refund:Function,\n    regproducer:Function,\n    unregprod:Function,\n    setram:Function,\n    regproxy:Function,\n    voteproducer:Function,\n    claimrewards:Function,\n    setpriv:Function,\n    rmvproducer:Function,\n    setalimits:Function,\n    setglimits:Function,\n    setprods:Function,\n    reqauth:Function,\n    setparams:Function,\n    contract:Function\n}\n//*/\n\nexport interface Scatter {\n    identity: any,\n    eosHook: Function;\n    eos?:Function,\n    network: any;\n    // -----------------\n    \n    forgotten?:boolean, // was forgetIdentity executed?\n    \n    isExtension: boolean,\n    // -----------------\n    authenticate: Function,\n    connect: Function,\n    constructor: Function,\n    createTransaction: Function,\n    disconnect: Function,\n    forgetIdentity: Function,\n    getArbitrarySignature: Function,\n    getIdentity: Function,\n    getIdentityFromPermissions: Function,\n    getPublicKey: Function,\n    getVersion: Function,\n    hasAccountFor: Function,\n    isConnected: Function,\n    isPaired: Function,\n    linkAccount: Function,\n    loadPlugin: Function,\n    requestSignature: Function,\n    requestTransfer: Function,\n    suggestNetwork: Function\n}\n\nexport interface AccountData {\n    account_name?: string,\n    head_block_num?: number,\n    head_block_time?: string,\n    privileged?: false,\n    last_code_update?: string,\n    created?: string,\n    core_liquid_balance?: string,\n    core_liquid_balance_asset?: Asset,\n    ram_quota?: number,\n    net_weight?: number,\n    cpu_weight?: number,\n    total_balance: string,\n    total_balance_asset: Asset,\n    ram_limit?: {\n        percentStr?: string,\n        used?: number,\n        available?: number,\n        max?: number\n    },\n    net_limit?: {\n        percentStr?: string,\n        used?: number,\n        available?: number,\n        max?: number\n    },\n    cpu_limit?: {\n        percentStr?: string,\n        used?: number,\n        available?: number,\n        max?: number\n    },\n    ram_usage?: number,\n    permissions?: {\n        perm_name?: string,\n        parent?: string,\n        required_auth?: {\n            threshold?: 1,\n            keys?: {\n                key?: string,\n                weight?: 1\n            }[],\n            accounts?: any[],\n            waits?: any[]\n        }\n    }[],\n    total_resources?: {\n        owner?: string,\n        net_weight?: string,\n        net_weight_asset?: Asset,\n        cpu_weight?: string,\n        cpu_weight_asset?: Asset,\n        ram_bytes?: number\n    },\n    self_delegated_bandwidth?: {\n        from?: string,\n        to?: string,\n        total?: string,\n        total_asset?: Asset,\n        net_weight?: string,\n        net_weight_asset?: Asset,\n        cpu_weight?: string,\n        cpu_weight_asset?: Asset,\n    },\n    refund_request?: {\n        owner?: string,\n        request_time?: string,\n        total?: string,\n        total_asset?: Asset,\n        net_amount?: string,\n        net_amount_asset?: Asset,\n        cpu_amount?: string,\n        cpu_amount_asset?: Asset\n    },\n    voter_info?: {\n        owner?: string,\n        proxy?: string,\n        producers?: string[],\n        staked?: number,\n        last_vote_weight?: string,\n        proxied_vote_weight?: string,\n        is_proxy?: number\n    },\n    returnedFields?: null\n}\n\nexport interface Account {\n    authority?: string,\n    blockchain?: string,\n    name: string,\n    publicKey?: string,\n    data?: AccountData\n}\n\nexport interface Endpoint {\n    protocol:string,\n    host:string,\n    port:number\n}\n\nexport interface Eosconf {\n    blockchain:string,\n    protocol:string,\n    host:string,\n    port:number,\n    chainId:string\n}\n\nexport interface Network {\n    slug?: string,\n    index?: number,\n    eosconf?: Eosconf,\n    explorer?: string,\n    symbol: string,\n    name: string,\n    chainId:string,\n    endpoints: Endpoint[]\n}\n\nexport interface NetworkMap {\n    [key:string]:Network\n};\n\nexport interface ScatterJSDef {\n    plugins?:any,\n    scatter?:any\n}\n\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class VapaeeScatter {\n    \n    private scatterutils = new ScatterUtils();\n    public error: string;\n    private appTitle: string;\n    private symbol: string;\n    private _connected: boolean;\n    private lib: Scatter;\n    private rpc: RPC; // eosjs2\n    public feed: Feedback;\n    private ScatterJS: ScatterJSDef;\n    private _network: Network;\n    private _networks: NetworkMap;\n    private _networks_slugs: string[];\n    private _account_queries: {[key:string]:Promise<AccountData>};\n    private eos: EOS;\n    public onNetworkChange:Subject<Network> = new Subject();\n    public onLogggedStateChange:Subject<boolean> = new Subject();\n    public _account: Account;\n    private setReady: Function;\n    public waitReady: Promise<any> = new Promise((resolve) => {\n        this.setReady = resolve;\n    });\n    private setLogged: Function;\n    public waitLogged: Promise<any> = new Promise((resolve) => {\n        this.setLogged = resolve;\n    });\n    private setConnected: Function;\n    public waitConnected: Promise<any> = new Promise((resolve) => {\n        this.setConnected = resolve;\n    });\n    private setEosjs: Function;\n    public waitEosjs: Promise<any> = new Promise((resolve) => {\n        this.setEosjs = resolve;\n    });\n    private setEndpointsReady: Function;\n    public waitEndpoints: Promise<any> = new Promise((resolve) => {\n        this.setEndpointsReady = resolve;\n    });    \n    \n    constructor(\n    ) {\n        this.feed = new Feedback();\n        this._networks_slugs = [];\n        this._networks = {};\n        this._network = {\n            \"name\": \"EOS MainNet\",\n            \"symbol\": \"EOS\",\n            \"explorer\": \"https://www.bloks.io\",\n            \"chainId\":\"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906\",\n            \"endpoints\": [{\n                \"protocol\":\"https\",\n                \"host\":\"nodes.get-scatter.com\",\n                \"port\":443\n            }]\n        };\n        \n        this.symbol = \"EOS\";\n        // this.waitReady.then(() => console.log(\"ScatterService.setReady()\"));\n        // console.error(\"scatter interrumpido --------------------------------\");\n        \n        this._account_queries = {};\n    }\n\n    get utils() {\n        return this.scatterutils;\n    }\n\n    // Acount, Identity and authentication -----------------\n    get account(): Account {\n        if (!this._account || !this._account.name) {\n            if (this.lib && this.lib.identity && this.lib.identity.accounts) {\n                this._account = this.lib.identity.accounts.find(x => x.blockchain === \"eos\" || x.blockchain === \"tlos\");\n            }            \n        }        \n        return this._account;\n    }\n\n    get default(): Account {\n        // default data before loading data\n        // TODO: fill out with better default data.\n        return {\n            name:'guest',\n            data: {\n                total_balance: \"\",\n                total_balance_asset: new Asset(),\n                cpu_limit: {},\n                net_limit: {},\n                ram_limit: {},\n                refund_request: {},\n                total_resources: {}\n            }\n        }\n    }\n\n    resetIdentity() {\n        console.log(\"ScatterService.resetIdentity()\");\n        this.error = \"\";\n        if (this.lib) {\n            this.lib.identity = null;\n            if (!this.lib.forgotten) {\n                this.lib.forgotten = true;\n                this.lib.forgetIdentity();\n            }\n        }\n        this.onLogggedStateChange.next(true);\n    }\n\n    private setIdentity(identity:any) {\n        console.log(\"ScatterService.setIdentity()\", [identity]);\n        console.assert(!!this.lib, \"ERROR: no instance of scatter found\");\n        this.error = \"\";\n        this.lib.identity = identity;\n        this.lib.forgotten = false;\n        this._account = this.lib.identity.accounts.find(x => x.blockchain === \"eos\" || x.blockchain === \"tlos\");\n        if (!this.account) {\n            console.error(\"ScatterService.setIdentity()\", [identity]);\n        }\n        // console.log(\"ScatterService.setIdentity() -> ScatterService.queryAccountData() : \" , [this.account.name]);\n        this.queryAccountData(this.account.name).then(account => {\n            this.account.data = account;\n            this.onLogggedStateChange.next(true);\n        }).catch(_ => {\n            this.account.data = this.default.data;\n            this.onLogggedStateChange.next(true);\n        });\n    }    \n\n    // ----------------------------------------------------------\n    // Networks (eosio blockchains) & Endpoints -----------------\n    public setEndpoints(endpoints: NetworkMap) {\n        this._networks = endpoints || this._networks;\n        for (var i in this._networks) {\n            this._networks_slugs.push(i);\n        }\n        this.setEndpointsReady();\n    }\n\n    setNetwork(name:string, index: number = 0) {\n        console.log(\"ScatterService.setNetwork(\"+name+\",\"+index+\")\");\n        return this.waitEndpoints.then(() => {\n            var n = this.getNetwork(name, index);\n            if (n) {\n                if (this._network.name != n.name) {\n                    this._network = n;\n                    this.resetIdentity();\n                    this.initScatter();\n                    this.onNetworkChange.next(this.getNetwork(name));\n                }\n            } else {\n                console.error(\"ERROR: Scatter.setNetwork() unknown network name-index. Got (\"\n                    + name + \", \" + index + \"). Availables are:\", this._networks);\n                console.error(\"Falling back to eos mainnet\");\n                return this.setNetwork(\"eos\");\n            }    \n        });\n    }\n\n    getNetwork(slug:string, index: number = 0): Network {\n        if (this._networks[slug]) {\n            if (this._networks[slug].endpoints.length > index && index >= 0) {\n                var network: Network = this._networks[slug];\n                var endpoint:Endpoint = network.endpoints[index];\n                network.slug = slug;\n                network.index = index;\n                network.eosconf = {\n                    blockchain: \"eos\",\n                    chainId: network.chainId,\n                    host: endpoint.host,\n                    port: endpoint.port,\n                    protocol: endpoint.protocol,\n                }                \n                return network;\n            } else {\n                console.error(\"ERROR: Scatter.getNetwork() index out of range. Got \"\n                    + index + \" expected number between [0..\"+this._networks[slug].endpoints.length+\"]\", );\n            }            \n        } else {\n            console.error(\"ERROR: Scatter.getNetwork() unknown network slug. Got \"\n                + slug + \" expected one of\", this.networks);\n        }\n        return null;\n    }\n\n    get networks(){\n        return this._networks_slugs;\n    }\n\n    get network(): Network {\n        return this._network;\n    }\n\n    private resetPromises() {\n        console.error(\"ScatterService.resetPromises()\");\n        this.waitEosjs.then(r => {\n            this.waitEosjs = null;\n            var p = new Promise((resolve) => {\n                if (this.waitEosjs) return;\n                this.waitEosjs = p;\n                this.setEosjs = resolve;\n                this.resetPromises();\n            });\n        });\n        this.waitConnected.then(r => {\n            this.waitConnected = null;\n            var p = new Promise((resolve) => {\n                if (this.waitConnected) return;\n                this.waitConnected = p;\n                this.setConnected = resolve;\n                this.resetPromises();\n            });\n        });\n        this.waitReady.then(r => {\n            this.waitReady = null;\n            var p = new Promise((resolve) => {\n                if (this.waitReady) return;\n                this.waitReady = p;\n                this.setReady = resolve;\n                this.resetPromises();\n                //this.waitReady.then(() => console.log(\"ScatterService.setReady()\"));                \n            });\n        });\n        this.waitLogged.then(r => {\n            this.waitLogged = null;\n            var p = new Promise((resolve) => {\n                if (this.waitLogged) return;\n                this.waitLogged = p;\n                this.setLogged = resolve;\n                this.resetPromises();\n            });\n        });\n    }\n\n    // ----------------------------------------------------------\n    // Scatter initialization and AppConnection -----------------\n    initScatter() {\n        console.log(\"ScatterService.initScatter()\");\n        /*/\n        // eosjs2\n        this.error = \"\";\n        if ((<any>window).ScatterJS) {\n            this.ScatterJS = (<any>window).ScatterJS;\n            (<any>window).ScatterJS = null;\n        }\n\n        try {\n            ScatterJS.plugins( new ScatterEOS() );\n        } catch (e) {\n            console.error(\"ERROR:\", e.message, [e]);\n            console.error(\"Falling back to normal ScatterEOS plugin\");\n            ScatterJS.plugins( new ScatterEOS() );\n        }\n         \n        this.lib = ScatterJS.scatter;\n\n        const network = ScatterJS.Network.fromJson(this.network.eosconf);\n        this.rpc = new JsonRpc(network.fullhost());\n        this.eos = this.lib.eos(network, Api, {rpc:this.rpc});\n\n        this.setEosjs(\"eosjs\");\n        /*/\n        // eosjs\n        console.log(\"ScatterService.initScatter()\");\n        this.error = \"\";\n        if ((<any>window).ScatterJS) {\n            this.ScatterJS = (<any>window).ScatterJS;\n            this.ScatterJS.plugins( new ScatterEOS() );\n            this.lib = this.ScatterJS.scatter;  \n            (<any>window).ScatterJS = null;\n        }\n        console.log(\"EOSJS()\",[this.network.eosconf]);\n        this.eos = this.lib.eos(this.network.eosconf, Eos, { expireInSeconds:60 });\n        this.setEosjs(\"eosjs\");\n        //*/\n    }\n\n    reconnectTimer;\n    reconnectTime = 100;\n    retryConnectingApp() {\n        clearInterval(this.reconnectTimer);\n        this.reconnectTimer = setInterval(_ => {\n            // console.log(\"ScatterService.reconnectTimer()\");\n            if (this._connected) {\n                // console.error(\"ScatterService.retryConnectingApp() limpio el intervalo\");\n                clearInterval(this.reconnectTimer);\n            } else {\n                if (this.account) {\n                    // console.error(\"ScatterService.retryConnectingApp()  existe account pero no est conectado\");\n                    this.connectApp();\n                }\n            }\n        },this.reconnectTime);\n        this.reconnectTime += 1000*Math.random();\n        if (this.reconnectTime > 4000) this.reconnectTime = 4000;\n    }\n\n    connectApp(appTitle:string = \"\") {\n        // this.connect_count++;\n        // var resolve_num = this.connect_count;\n        this.feed.setLoading(\"connect\", true);\n        if (appTitle != \"\") this.appTitle = appTitle;\n        console.log(`ScatterService.connectApp(${this.appTitle})`);\n        const connectionOptions = {initTimeout:1800}\n        if (this._connected) return Promise.resolve(); // <---- avoids a loop\n        var promise = new Promise<any>((resolve, reject) => {\n            this.waitConnected.then(resolve);\n            if (this._connected) return; // <---- avoids a loop\n            this.waitEosjs.then(() => {\n                console.log(\"ScatterService.waitEosjs() eos OK\");\n                this.lib.connect(this.appTitle, connectionOptions).then(connected => {\n                    // si est logueado this.lib.identity se carga slo y ya est disponible\n                    console.log(\"ScatterService.lib.connect()\", connected);\n                    this._connected = connected;\n                    if(!connected) {\n                        this.feed.setError(\"connect\", \"ERROR: can not connect to Scatter. Is it up and running?\");\n                        console.error(this.feed.error(\"connect\"));\n                        reject(this.feed.error(\"connect\"));\n                        this.feed.setLoading(\"connect\", false);\n                        this.retryConnectingApp();\n                        return false;\n                    }\n                    // Get a proxy reference to eosjs which you can use to sign transactions with a user's Scatter.\n                    console.log(\"ScatterService.setConnected()\");\n                    this.setConnected(\"connected\");\n                    this.feed.setLoading(\"connect\", false);\n                    if (this.logged) {\n                        this.login().then(() => {\n                            console.log(\"ScatterService.setReady()\");\n                            this.setReady(\"ready\");\n                        }).catch(reject);\n                    } else {\n                        console.log(\"ScatterService.setReady()\");\n                        this.setReady(\"ready\");\n                    }\n                }).catch(e => {\n                    console.error(e);\n                    this.feed.setLoading(\"connect\", false);\n                    throw e;\n                });    \n            });    \n        });\n        return promise;\n    }\n\n\n    // ----------------------------------------------------------\n    // AccountData and Balances ---------------------------------\n    calculateTotalBalance(account) {\n        return new Asset(\"0.0000 \" + this.symbol)\n            .plus(account.core_liquid_balance_asset)\n            .plus(account.refund_request.net_amount_asset)\n            .plus(account.refund_request.cpu_amount_asset)\n            .plus(account.self_delegated_bandwidth.cpu_weight_asset)\n            .plus(account.self_delegated_bandwidth.net_weight_asset);\n    }\n\n    calculateResourceLimit(limit) {\n        limit = Object.assign({\n            max: 0, used: 0\n        }, limit);\n        \n        if (limit.max != 0) {\n            limit.percent = 1 - (Math.min(limit.used, limit.max) / limit.max);\n        } else {\n            limit.percent = 0;\n        }\n        limit.percentStr = Math.round(limit.percent*100) + \"%\";\n        return limit;\n    }\n\n    queryAccountData(name:string): Promise<AccountData> {\n        /*\n        // get_table_rows\n            code: \"eosio\"\n            index_position: 1\n            json: true\n            key_type: \"i64\"\n            limit: -1\n            lower_bound: null\n            scope: \"gqydoobuhege\"\n            table: \"delband\"\n            table_key: \"\"\n        */\n        console.log(\"ScatterService.queryAccountData(\"+name+\") \");\n        this._account_queries[name] = this._account_queries[name] || new Promise<AccountData>((resolve, reject) => {\n            // console.log(\"PASO 1 ------\", [this._account_queries])\n            this.waitEosjs.then(() => {\n                // console.log(\"PASO 2 (eosjs) ------\");\n                \n                /*\n                // eosjs2\n                this.rpc.get_account(name).\n                /*/\n                // eosjs\n                this.eos.getAccount({account_name: name}).\n                //*/\n                \n                then((response) => {\n                    // console.log(\"PASO 3 (eosjs.getAccount) ------\", response);\n                    var account_data: AccountData = <AccountData>response;\n\n                    if (account_data.core_liquid_balance) {\n                        this.symbol = account_data.core_liquid_balance.split(\" \")[1];\n                    } else {\n                        account_data.core_liquid_balance = \"0.0000 \" + this.symbol;\n                    }\n                    account_data.core_liquid_balance_asset = new Asset(account_data.core_liquid_balance);\n                    \n\n                    // ----- refund_request -----\n                    account_data.refund_request = account_data.refund_request || {\n                        total: \"0.0000 \" + this.symbol,\n                        net_amount: \"0.0000 \" + this.symbol,\n                        cpu_amount: \"0.0000 \" + this.symbol,\n                        request_time: \"2018-11-18T18:09:53\"\n                    }\n                    account_data.refund_request.cpu_amount_asset = new Asset(account_data.refund_request.cpu_amount);\n                    account_data.refund_request.net_amount_asset = new Asset(account_data.refund_request.net_amount);\n                    account_data.refund_request.total_asset = \n                        account_data.refund_request.cpu_amount_asset.plus(account_data.refund_request.net_amount_asset)\n                    account_data.refund_request.total = account_data.refund_request.total_asset.toString();\n                        \n                    // ----- self_delegated_bandwidth ----\n                    account_data.self_delegated_bandwidth = account_data.self_delegated_bandwidth || {\n                        total: \"0.0000 \" + this.symbol,\n                        net_weight: \"0.0000 \" + this.symbol,\n                        cpu_weight: \"0.0000 \" + this.symbol\n                    }                    \n                    account_data.self_delegated_bandwidth.net_weight_asset = new Asset(account_data.self_delegated_bandwidth.net_weight);\n                    account_data.self_delegated_bandwidth.cpu_weight_asset = new Asset(account_data.self_delegated_bandwidth.cpu_weight);\n                    account_data.self_delegated_bandwidth.total_asset = \n                        account_data.self_delegated_bandwidth.cpu_weight_asset.plus(account_data.self_delegated_bandwidth.net_weight_asset);\n                    account_data.self_delegated_bandwidth.total = account_data.self_delegated_bandwidth.total_asset.toString();\n                    \n\n                    // ----- total_resources -----\n                    account_data.total_resources = account_data.total_resources || {\n                        net_weight: \"0.0000 \" + this.symbol,\n                        cpu_weight: \"0.0000 \" + this.symbol\n                    }\n                    account_data.total_resources.net_weight_asset = new Asset(account_data.total_resources.net_weight);\n                    account_data.total_resources.cpu_weight_asset = new Asset(account_data.total_resources.cpu_weight);\n\n                    account_data.total_balance_asset = this.calculateTotalBalance(account_data);\n                    account_data.total_balance = account_data.total_balance_asset.toString();\n\n                    account_data.cpu_limit = this.calculateResourceLimit(account_data.cpu_limit);\n                    account_data.net_limit = this.calculateResourceLimit(account_data.net_limit);\n                    account_data.ram_limit = this.calculateResourceLimit({\n                        max: account_data.ram_quota, used: account_data.ram_usage\n                    });\n\n\n                    // console.log(\"-------------------------------\");\n                    // console.log(\"account_data: \", account_data);\n                    // console.log(\"-------------------------------\");\n\n                    resolve(account_data);\n                }).catch((err) => {\n                    reject(err);\n                });\n                \n            }).catch((error) => {\n                console.error(error);\n                reject(error);\n            });\n        });\n\n        var promise = this._account_queries[name];\n        promise.then((r) => {\n            setTimeout(() => {\n                delete this._account_queries[r.account_name];\n            });\n        });\n        \n        return promise;\n    }\n\n    /*\n    // eosjs2\n    async executeTransaction(contract:string, action:string, data:any) {\n        return new Promise((resolve, reject) => {\n            this.login().then(_ => {\n                this.waitReady.then(() => {\n                    \n                    this.eos.transact(\n                        {\n                            actions: [{\n                                account: contract,\n                                name: action,\n                                data: data,\n                                authorization: [{\n                                    actor: this.account.name,\n                                    permission: this.account.authority\n                                }],                            \n                            }]\n                        },\n                        {\n                            blocksBehind: 3,\n                            expireSeconds: 30\n                        }                        \n                    ).then(result => {\n                        console.log(\"EXITO !!!!\", result);\n                        resolve(result);\n                    }).catch((error) => {\n                        console.error(\"ERROR !!!!\", error);\n                        reject(error);\n                    }); \n\n\n                });\n            }).catch((error) => {\n                console.error(error);\n                reject(error);\n            });   \n        }); \n    }\n    */\n\n\n    /*\n    \n    {\n        actions: [{\n            account: this.contractAccount,\n            name: action,\n            authorization: [{\n                actor: this.account.name,\n                permission: this.account.authority\n            }],\n            data: {\n              ...data\n            }\n        }]\n    },\n    {\n        blocksBehind: 3,\n        expireSeconds: 30\n    }    \n    */\n\n    getSmartContract(account_name) {\n        return new SmartContract(account_name, this);\n    }\n    \n    getContractWrapper(account_name): Promise<any> {\n        console.log(`ScatterService.getContract(${account_name})`);\n        return new Promise((resolve, reject) => {\n            this.login().then((a) => {\n                console.log(\"this.login().then((a) => { -->\", a );\n                this.waitReady.then(() => {\n                    \n                    this.eos.contract(account_name).then(contract => {\n                        console.log(`-- contract ${account_name} --`);\n                        for (var i in contract) {\n                            if(typeof contract[i] == \"function\") console.log(\"contract.\"+i+\"()\", [contract[i]]);\n                        }\n                        resolve(contract);\n                    }).catch(error => {\n                        console.error(error);\n                    });\n                    \n                });\n            }).catch((error) => {\n                console.error(error);\n                reject(error);\n            });   \n        }); \n    }\n    \n\n    /*\n    transfer(from:string, to:string, amount:string, memo:string) {\n        console.log(\"ScatterService.transfer()\", from, to, amount, memo);\n        return new Promise((resolve, reject) => {\n            this.waitEosjs.then(() => {\n                console.log(\"Scatter.transfer():\", from, to, amount, memo, this.authorization);\n                \n                this.eos.transfer(from, to, amount, memo, this.authorization).then(trx => {\n                    // That's it!\n                    console.log(`Transaction ID: ${trx.transaction_id}`, trx);\n                    // en Notas est el json que describe el objeto trx\n                    resolve(trx);\n                }).catch(error => {\n                    console.error(error);\n                });\n                \n            }).catch((error) => {\n                console.error(error);\n                reject(error);\n            });   \n        });\n    }\n    */\n\n    // loginTimer;\n    login() {\n        console.log(\"ScatterService.login()\");\n        this.feed.setLoading(\"login\", true);\n        return new Promise<any>((resolve, reject) => {\n            if (this.lib.identity) {\n                this.setIdentity(this.lib.identity);\n                resolve(this.lib.identity);\n            } else {\n                var loginTimer = setTimeout( _ => {\n                    this.feed.setLoading(\"login\", false);\n                    reject(\"connection timeout\");\n                }, 5000);\n                this.connectApp().then(() => {\n                    this.lib.getIdentity({\"accounts\":[this.network.eosconf]})\n                        .then( (identity)  => {\n                            clearTimeout(loginTimer);\n                            this.setIdentity(identity);\n                            this.setLogged();\n                            this.feed.setLoading(\"login\", false);\n                            resolve(identity);                            \n                        })\n                        .catch(reject);\n                }).catch(reject);    \n            }\n        });\n    }\n\n    logout() {\n        console.log(\"ScatterService.logout()\");\n        this.feed.setLoading(\"login\", false);\n        return new Promise<any>((resolve, reject) => {\n            this.connectApp().then(() => {\n                this.lib.forgotten = true;\n                this.lib.forgetIdentity()\n                    .then( (err)  => {\n                        console.log(\"disconnect\", err);\n                        this.resetIdentity();\n                        this.feed.setLoading(\"login\", false);\n                        resolve(\"logout\");\n                    })\n                    .catch(reject);\n            }).catch(reject);    \n        });\n    }\n\n    get logged(): boolean {\n        if (!this.lib) return false;\n        return !!this.lib.identity;\n    }\n\n    get username(): string {\n        if (!this.lib) return \"\";\n        return this.lib.identity ? this.lib.identity.name : \"\";\n    }\n\n    get authorization(): any {\n        if (!this.account)  {\n            console.error(\"ScatterService.authorization()\");\n            return { authorization:[\"unknown@unknown\"] }\n        }\n        return {\n            authorization:[`${this.account.name}@${this.account.authority}`]\n        };\n    }\n\n    get connected(): boolean {\n        return this._connected;\n    }\n\n    getTableRows(contract, scope, table, tkey, lowerb, upperb, limit, ktype, ipos): Promise<any> {\n        /*\n        // console.log(\"ScatterService.getTableRows()\");\n        // https://github.com/EOSIO/eosjs-api/blob/master/docs/api.md#eos.getTableRows\n        return new Promise<any>((resolve, reject) => {\n            this.waitEosjs.then(() => {\n                var json = {\n                    code: contract,\n                    index_position: ipos,\n                    json: true,\n                    key_type: ktype,\n                    limit: limit,\n                    lower_bound: lowerb,\n                    scope: scope,\n                    table: table,\n                    table_key: tkey,\n                    upper_bound: upperb\n                }\n                \n                this.rpc.get_table_rows(json).then(_data => {\n                    resolve(_data);\n                }).catch(error => {\n                    console.error(error);\n                });\n\n                \n            }).catch((error) => {\n                console.error(error);\n                reject(error);\n            });   \n        });\n        /*/\n        // console.log(\"ScatterService.getTableRows()\");\n        // https://github.com/EOSIO/eosjs-api/blob/master/docs/api.md#eos.getTableRows\n        return new Promise<any>((resolve, reject) => {\n            this.waitEosjs.then(() => {\n                this.eos.getTableRows(true, contract, scope, table, tkey, lowerb, upperb, limit, ktype, ipos).then(function (_data) {\n                    resolve(_data);\n                }).catch(error => {\n                    console.error(error);\n                });\n            }).catch((error) => {\n                console.error(error);\n                reject(error);\n            });   \n        });\n        //*/\n\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { VapaeeScatter } from './scatter.service';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [],\n  providers: [VapaeeScatter],\n  exports: []\n})\nexport class VapaeeScatterModule { }\n"]}