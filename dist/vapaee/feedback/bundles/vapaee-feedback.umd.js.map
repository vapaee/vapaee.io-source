{"version":3,"file":"vapaee-feedback.umd.js.map","sources":["ng://@vapaee/feedback/lib/feedback.service.ts","ng://@vapaee/feedback/lib/feedback.module.ts"],"sourcesContent":["export interface Feed {\n    msg?:string;\n    msgtype?:string;\n    loading?:boolean;\n    start?:Date;\n    marks?:{\n        label:string,\n        sec:number,\n        millisec:number\n    }[]\n}\n\nexport interface FeedMap {\n    [key:string]:Feed\n};\n\nexport class Feedback {\n    public keys: string[];\n    private scopes: FeedMap;\n\n    constructor() {\n        this.keys = []\n        this.scopes = {};\n    }\n\n    static create(keys:string[] = []) {\n        var feed = new Feedback();\n        feed.keys = keys;\n        return feed;\n    }\n\n    private updateScopes() {\n        for (var i in this.keys) {\n            this.scopes[this.keys[i]] = this.scopes[this.keys[i]] || {}\n        }\n    }\n\n    private addKey(key:string) {\n        this.keys.push(key);\n        this.updateScopes();\n    }\n\n    startChrono(key:string) {\n        if (this.scopes[key]) {\n            this.scopes[key].start = new Date();\n            this.scopes[key].marks = [];\n        } else {\n            this.addKey(key);\n            this.startChrono(key);\n        }\n    }\n\n    setMarck(key:string, label:string) {\n        if (this.scopes[key]) {\n            var elapsedTime:Date = new Date();\n            var millisec = elapsedTime.getTime() - this.scopes[key].start.getTime();\n            var sec = millisec / 1000;\n            this.scopes[key].marks.push({ label, sec, millisec });\n        } else {\n            console.error(\"ERROR: key not present\", key, this.scopes);\n        }        \n    }\n\n    printChrono(key:string, lastMark:boolean = true) {\n        if (this.scopes[key]) {\n            console.log(\"Chronometer marks for \", key);\n            this.setMarck(key, \"total\");\n            for (var i in this.scopes[key].marks) {\n                console.log(\"- \",this.scopes[key].marks[i]);\n            }\n        } else {\n            console.error(\"ERROR: key not present\", key, this.scopes);\n        }        \n    }\n\n    setLoading(key:string, value:boolean) {\n        if (this.scopes[key]) {\n            this.scopes[key].loading = value;\n        } else {\n            this.addKey(key);\n            this.setLoading(key, value);\n        }\n    }\n\n    loading(key:string) {\n        if (this.scopes[key]) {\n            return this.scopes[key].loading;\n        }\n        return false;\n    }\n\n    setError(key:string, err: string = \"\") {\n        if (this.scopes[key]) {\n            this.scopes[key].msg = err;\n            this.scopes[key].msgtype = \"error\";\n        } else {\n            this.addKey(key);\n            this.setError(key, err);\n        }\n    }\n\n    clearError(key:string) {\n        this.setError(key, \"\");\n    }\n\n\n    error(key:string) {\n        if (this.scopes[key]) {\n            return this.scopes[key].msg;\n        }\n        return \"\";\n    }\n\n    setMessage(key:string, msg: string, msgtype: string) {\n        if (this.scopes[key]) {\n            this.scopes[key].msg = msg;\n            this.scopes[key].msgtype = msgtype;\n        } else {\n            this.addKey(key);\n            this.setMessage(key, msg, msgtype);\n        }\n    }    \n\n    message(key:string) {\n        return this.error(key);\n    }\n\n    msgType(key:string) {\n        if (this.scopes[key]) {\n            return this.scopes[key].msgtype;\n        } else {\n            // console.error(\"ERROR\", key, [this.scopes]);\n        }\n        return \"\";\n    }\n\n}\n\n/*\n@Injectable({\n    providedIn: \"root\"\n})\nexport class FeedbackService {\n    \n    constructor(){}\n\n    create(keys:string[] = []) {\n        return new Feedback(keys);\n    }\n}\n*/","import { NgModule } from '@angular/core';\n\n@NgModule({\n    imports: [],\n    declarations: [],\n    providers:[],\n    exports: []\n})\nexport class VapaeeFeedbackModule { }\n"],"names":["NgModule"],"mappings":"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"}
